---
title: "Importing STAR templates"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Importing STAR templates}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

Load package and specify directory:

```{r}
library(gfcmSTAR)
dir <- file.path("~/git/gfcm-devops/StockAssessmentResults/uploads",
                 "2021/WGSAD_Western_Mediterranean")
```

Import all files:

```{r}
cluster <- import.dir(dir)
cbind(sapply(cluster, class))
```

Exclude files that have errors:

```{r}
cluster.ok <- cluster[sapply(cluster, class) != "try-error"]
```

Check that the `Assessment` fields are unique:

```{r}
peek <- function(star) star$Metadata$Assessment
assessment <- sapply(cluster.ok, peek)
cbind(assessment)
any(duplicated(assessment))
```
